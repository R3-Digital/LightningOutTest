<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NN974CX');</script>
    <!-- End Google Tag Manager -->

    <script src="https://jdh--r3full.sandbox.my.site.com/londonwomensclinic/lightning/lightning.out.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search);

      window.addEventListener('message', function (event) {
        if (event.data?.event && event.data.source === 'screen_flow') {
          window.dataLayer = window.dataLayer || [];
          window.dataLayer.push(event.data);
        }
      });

      $Lightning.use(
        "c:lwcIvfFormApp",
        () => {
          $Lightning.createComponent(
            "c:lwcIvfForm",
            {
              encrypytedString: params.get("encryptedString") || "",
              uniqueCode: params.get("uniqueCode") || ""
            },
            "lwc-ivf-form",
            (cmp) => { console.log("Component created"); }
          );
        },
        "https://jdh--r3full.sandbox.my.site.com/londonwomensclinic"
      );
    </script>
    <title>Donor Registration Form</title>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-NN974CX"
        height="0"
        width="0"
        style="display:none;visibility:hidden">
      </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="lwc-ivf-form"></div>
  </body>
</html>
